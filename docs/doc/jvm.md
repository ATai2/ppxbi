# 线程
可见性： 一个线程更改了变量，其他线程可以立即知道
保证可见性的方法：
* volatile
* synchronized  unlock之前，写变量回主存
* final 一旦初始化完成，其他线程可见

## 有序性
本线程内，操作时有序的
线程外观察，操作都是无序的（指令重排，或主内存同步延时）

## 指令重派

指令重排，就是为了尽量少的中断流水线。

线程内串行语句
写后读 a=1;b=a
写后写 a=1;a=2
读后写 a=b; b=1
以上不可重排

编译器不考虑多线程间的语义
可重排： a=1;b=2

---保证有序性的方法： synchronized 同步

指令重排的基本原则

- 顺序执行原则：一个线程内保证语义的串行性

- volatile规则：volatile变量的写，先发生于读

-锁规则：解锁(unlock)必然发生在随后的加锁(lock)前

-传递性：A先于B，B先于C，那么A必先于C

-线程的start方法先于它的每一个动作

-线程的所有操作先于线程的终结(Thread.join())

-线程的中断(interrupt())先于被中断线程的代码

-对象的构造函数执行结束先于finalize()方法








